<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Big Text Communicator</title>
  <style>
    :root{
      --bg:#111;
      --fg:#fff;
      --accent:#0ea5e9;
    }
    html,body{height:100%;margin:0;font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{display:flex;flex-direction:column;background:var(--bg);color:var(--fg)}

    header{padding:12px 16px;display:flex;align-items:center;gap:12px}
    h1{font-size:16px;margin:0}
    .controls{display:flex;gap:10px;align-items:center;margin-left:auto}
    .controls button,input,select{font-size:14px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.02);color:inherit}

    main{display:flex;flex:1;gap:12px;padding:12px}
    .left{width:360px;min-width:260px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;display:flex;flex-direction:column;gap:10px}
    label{font-size:13px}
    textarea{width:100%;height:220px;padding:10px;font-size:16px;border-radius:8px;resize:vertical;background:#fff;color:#000}
    .row{display:flex;gap:8px;align-items:center}
    .big-display-wrapper{flex:1;display:flex;align-items:center;justify-content:center;position:relative}
    #bigDisplay{width:100%;height:100%;display:flex;align-items:center;justify-content:center;text-align:center;padding:10px;box-sizing:border-box}
    #bigDisplay .text{word-wrap:break-word;overflow:hidden}

    .tips{font-size:13px;opacity:0.8}
    .quick-phrases{display:flex;flex-wrap:wrap;gap:6px}
    .quick-phrases button{padding:6px 8px;font-size:13px;border-radius:6px}

    footer{padding:8px 12px;font-size:13px;opacity:0.9}

    /* nice visible focus for keyboard navigation */
    button:focus, input:focus, textarea:focus, select:focus{outline:2px solid rgba(14,165,233,0.45);outline-offset:2px}

    @media (max-width:800px){main{flex-direction:column}.left{width:100%;min-width:unset}}
  </style>
</head>
<body>
  <header>
    <h1>Big Text Communicator</h1>
    <div class="controls">
      <button id="sendBtn">Send (Ctrl+Enter)</button>
      <button id="clearBtn">Clear (Esc)</button>
      <button id="fullscreenBtn">Fullscreen (F)</button>
    </div>
  </header>

  <main>
    <div class="left">
      <label for="inputText">Type a message</label>
      <textarea id="inputText" placeholder="Type here..." aria-label="Input message"></textarea>

      <div class="row">
        <label for="fontSize">Font size</label>
        <input id="fontSize" type="range" min="20" max="400" value="120">
        <span id="fontSizeLabel">120px</span>
      </div>

      <div class="row">
        <label for="fontFamily">Font</label>
        <select id="fontFamily">
          <option>system-ui</option>
          <option>Arial</option>
          <option>Helvetica</option>
          <option>Georgia</option>
          <option>Times New Roman</option>
          <option>Courier New</option>
        </select>
        <label for="fgColor">Text</label>
        <input id="fgColor" type="color" value="#ffffff">
        <label for="bgColor">BG</label>
        <input id="bgColor" type="color" value="#111111">
      </div>

      <div class="row">
        <label><input type="checkbox" id="allCaps"> ALL CAPS</label>
        <label><input type="checkbox" id="fitWidth"> Fit to width</label>
        <label><input type="checkbox" id="fitHeight"> Fit to height</label>
      </div>

      <div>
        <div class="tips">Quick phrases</div>
        <div class="quick-phrases" id="phrases">
          <!-- buttons injected by JS -->
        </div>
      </div>

      <div class="row">
        <button id="copyBtn">Copy display</button>
        <button id="saveBtn">Save as image</button>
        <div style="flex:1"></div>
      </div>

      <div class="tips">Shortcuts: <strong>Ctrl+Enter</strong> send • <strong>Esc</strong> clear • <strong>F</strong> fullscreen • Click display to copy</div>
    </div>

    <div class="big-display-wrapper">
      <div id="bigDisplay" role="region" aria-live="polite">
        <div class="text" id="displayText" style="font-size:120px;line-height:1">Hello</div>
      </div>
    </div>
  </main>

  <footer>Settings saved locally. Designed to be simple and work offline.</footer>

<script>
(function(){
  const input = document.getElementById('inputText');
  const sendBtn = document.getElementById('sendBtn');
  const clearBtn = document.getElementById('clearBtn');
  const fullscreenBtn = document.getElementById('fullscreenBtn');
  const fontSize = document.getElementById('fontSize');
  const fontSizeLabel = document.getElementById('fontSizeLabel');
  const displayText = document.getElementById('displayText');
  const fontFamily = document.getElementById('fontFamily');
  const fgColor = document.getElementById('fgColor');
  const bgColor = document.getElementById('bgColor');
  const allCaps = document.getElementById('allCaps');
  const fitWidth = document.getElementById('fitWidth');
  const fitHeight = document.getElementById('fitHeight');
  const copyBtn = document.getElementById('copyBtn');
  const saveBtn = document.getElementById('saveBtn');
  const bigDisplay = document.getElementById('bigDisplay');
  const phrasesEl = document.getElementById('phrases');

  const QUICK = [
    'Hello', 'Yes', 'No', 'Thank you', 'Please wait', 'I need help', 'I love you', 'Let\'s go', 'Sorry', 'Good morning'
  ];

  function makePhrases(){
    QUICK.forEach(p => {
      const b = document.createElement('button');
      b.textContent = p;
      b.addEventListener('click', () => {
        input.value = p;
        send();
      });
      phrasesEl.appendChild(b);
    });
  }
  makePhrases();

  // load saved
  const saved = JSON.parse(localStorage.getItem('bigText.settings')|| '{}');
  if(saved.text) input.value = saved.text;
  if(saved.fontSize) fontSize.value = saved.fontSize;
  if(saved.fontFamily) fontFamily.value = saved.fontFamily;
  if(saved.fgColor) fgColor.value = saved.fgColor;
  if(saved.bgColor) bgColor.value = saved.bgColor;
  if(saved.allCaps) allCaps.checked = saved.allCaps;
  if(saved.fitWidth) fitWidth.checked = saved.fitWidth;
  if(saved.fitHeight) fitHeight.checked = saved.fitHeight;

  function saveSettings(){
    const s = {text: input.value, fontSize: fontSize.value, fontFamily: fontFamily.value, fgColor: fgColor.value, bgColor: bgColor.value, allCaps: allCaps.checked, fitWidth: fitWidth.checked, fitHeight: fitHeight.checked};
    localStorage.setItem('bigText.settings', JSON.stringify(s));
  }

  function updateDisplay(text){
    let t = text || '';
    if(allCaps.checked) t = t.toUpperCase();
    displayText.textContent = t || '\u00A0'; // keep height if empty
    displayText.style.fontFamily = fontFamily.value;
    displayText.style.fontSize = fontSize.value + 'px';
    bigDisplay.style.background = bgColor.value;
    displayText.style.color = fgColor.value;
    fontSizeLabel.textContent = fontSize.value + 'px';

    if(fitWidth.checked || fitHeight.checked){
      fitToBox();
    }
  }

  function fitToBox(){
    // naive fit: decrease font-size until fits
    const wrapper = bigDisplay.getBoundingClientRect();
    let size = parseInt(fontSize.value,10);
    displayText.style.fontSize = size + 'px';
    let tries = 0;
    while(tries < 30){
      const r = displayText.getBoundingClientRect();
      const fitsWidth = r.width <= wrapper.width - 20; // padding
      const fitsHeight = r.height <= wrapper.height - 20;
      if((fitWidth.checked && !fitsWidth) || (fitHeight.checked && !fitsHeight)){
        size = Math.max(10, Math.floor(size * 0.9));
        displayText.style.fontSize = size + 'px';
      } else {
        break;
      }
      tries++;
    }
  }

  function send(){
    updateDisplay(input.value);
    saveSettings();
  }

  sendBtn.addEventListener('click', send);
  input.addEventListener('keydown', (e) => {
    if((e.ctrlKey || e.metaKey) && e.key === 'Enter'){
      e.preventDefault(); send();
    }
    if(e.key === 'Escape'){
      input.value=''; send();
    }
  });

  clearBtn.addEventListener('click', () => { input.value=''; send(); });

  fontSize.addEventListener('input', () => { updateDisplay(input.value); saveSettings(); });
  fontFamily.addEventListener('change', () => { updateDisplay(input.value); saveSettings(); });
  fgColor.addEventListener('input', () => { updateDisplay(input.value); saveSettings(); });
  bgColor.addEventListener('input', () => { updateDisplay(input.value); saveSettings(); });
  allCaps.addEventListener('change', () => { updateDisplay(input.value); saveSettings(); });
  fitWidth.addEventListener('change', () => { updateDisplay(input.value); saveSettings(); });
  fitHeight.addEventListener('change', () => { updateDisplay(input.value); saveSettings(); });

  // click display to copy
  bigDisplay.addEventListener('click', () => {
    copyDisplay();
  });
  copyBtn.addEventListener('click', copyDisplay);
  function copyDisplay(){
    const text = displayText.textContent || '';
    if(!text) return;
    navigator.clipboard?.writeText(text).then(()=>{
      copyBtn.textContent = 'Copied!';
      setTimeout(()=>copyBtn.textContent='Copy display',800);
    }).catch(()=>{
      alert('Copy failed — maybe insecure context');
    });
  }

  // save as image (uses SVG technique)
  saveBtn.addEventListener('click', () => {
    const svg = `<?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${bigDisplay.clientWidth}\" height=\"${bigDisplay.clientHeight}\"><rect width=\"100%\" height=\"100%\" fill=\"${bgColor.value}\"/><text x=\"50%\" y=\"50%\" font-family=\"${fontFamily.value}\" font-size=\"${parseInt(getComputedStyle(displayText).fontSize,10)}\" fill=\"${fgColor.value}\" dominant-baseline=\"middle\" text-anchor=\"middle\">${escapeXml(displayText.textContent)}</text></svg>`;
    const blob = new Blob([svg],{type:'image/svg+xml'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'display.svg';
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  });

  function escapeXml(s){ return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;'); }

  // keyboard fullscreen
  document.addEventListener('keydown', (e)=>{
    if(e.key.toLowerCase() === 'f'){
      toggleFull();
    }
  });

  fullscreenBtn.addEventListener('click', toggleFull);
  function toggleFull(){
    const el = document.documentElement;
    if(!document.fullscreenElement){
      el.requestFullscreen?.();
    } else {
      document.exitFullscreen?.();
    }
  }

  // initialize
  updateDisplay(input.value || 'Hello');

  // responsive: recalc fit on resize
  window.addEventListener('resize', ()=>{ if(fitWidth.checked||fitHeight.checked) fitToBox(); });

})();
</script>
</body>
</html>
